<%ARGS>

        $id	=> undef
	$class	=> undef
	$source_class	=> undef
	$dest_class	=> undef

</%ARGS>


<%init>
	if ($id)
	{
		my $document = $keeper->get_document_by_id($id, class=>$class);

		my @link_args = ();
		if ( exists $ARGS{links} && ref $ARGS{links} eq 'ARRAY' ) {
			@link_args = @{ $ARGS{links} }
		} elsif ( exists $ARGS{links} ) {
			@link_args = ( $ARGS{links} );
		}

		my %nlinks = ();
		foreach my $name (@link_args)
		{
			if ($name =~ /^link_(\d+)_(\d+)_(.*)$/)
			{
				my ($id, $dest_id, $lclass) = ($1, $2, $3);
				if ( $id && $lclass ) {
					my $link = $keeper->get_link_by_id ($id,
						class   => $lclass,
					);
					$link->delete		if ref $link;
				}
			}
		}

		# Проброс на содержание документа...
		if ( $source_class ) {
			$m->redirect ("document_links.html?id=$id&class=$class&source_class=$source_class");
		} elsif ( $dest_class ) {
			$m->redirect ("document_links.html?id=$id&class=$class&dest_class=$dest_class");
		} else {
			$m->redirect ("document_links.html?id=$id&class=$class");
		}
	}

</%init>
